{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/React/Portfolio/GeneralStore/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Projects/React/Portfolio/GeneralStore/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Projects/React/Portfolio/GeneralStore/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../components/Layout/Layout\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import\"../styles/ProductDetailsStyles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetails=function ProductDetails(){var _product$price,_product$category;var params=useParams();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedProducts=_useState4[0],setRelatedProducts=_useState4[1];//initalp details\nuseEffect(function(){if(params!==null&&params!==void 0&&params.slug)getProduct();},[params===null||params===void 0?void 0:params.slug]);//getProduct\nvar getProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/product/get-product/\".concat(params.slug));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProduct(data===null||data===void 0?void 0:data.product);getSimilarProduct(data===null||data===void 0?void 0:data.product._id,data===null||data===void 0?void 0:data.product.category._id);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getProduct(){return _ref.apply(this,arguments);};}();//get similar product\nvar getSimilarProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(pid,cid){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/v1/product/related-product/\".concat(pid,\"/\").concat(cid));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setRelatedProducts(data===null||data===void 0?void 0:data.products);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function getSimilarProduct(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row container product-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(product._id),className:\"card-img-top\",alt:product.name,height:\"300\",width:\"350px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 product-details-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Product Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Name : \",product.name]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Description : \",product.description]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Price :\",product===null||product===void 0?void 0:(_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Category : \",product===null||product===void 0?void 0:(_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.name]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-secondary ms-1\",children:\"ADD TO CART\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row container similar-products\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Similar Products \\u27A1\\uFE0F\"}),relatedProducts.length<1&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No Similar Products found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:relatedProducts===null||relatedProducts===void 0?void 0:relatedProducts.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title card-price\",children:p.price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text \",children:[p.description.substring(0,60),\"...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-name-price\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ms-1\",onClick:function onClick(){return navigate(\"/product/\".concat(p.slug));},children:\"More Details\"})})]})]},p._id);})})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useState","useEffect","Layout","axios","useParams","useNavigate","ProductDetails","params","navigate","product","setProduct","relatedProducts","setRelatedProducts","slug","getProduct","get","data","getSimilarProduct","_id","category","console","log","pid","cid","products","name","description","price","toLocaleString","style","currency","length","map","p","substring"],"sources":["D:/Projects/React/Portfolio/GeneralStore/client/src/pages/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./../components/Layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport \"../styles/ProductDetailsStyles.css\";\r\n\r\nconst ProductDetails = () => {\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState({});\r\n  const [relatedProducts, setRelatedProducts] = useState([]);\r\n\r\n  //initalp details\r\n  useEffect(() => {\r\n    if (params?.slug) getProduct();\r\n  }, [params?.slug]);\r\n  //getProduct\r\n  const getProduct = async () => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `/api/v1/product/get-product/${params.slug}`\r\n      );\r\n      setProduct(data?.product);\r\n      getSimilarProduct(data?.product._id, data?.product.category._id);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  //get similar product\r\n  const getSimilarProduct = async (pid, cid) => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `/api/v1/product/related-product/${pid}/${cid}`\r\n      );\r\n      setRelatedProducts(data?.products);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <Layout>\r\n      <div className=\"row container product-details\">\r\n        <div className=\"col-md-6\">\r\n          <img\r\n            src={`/api/v1/product/product-photo/${product._id}`}\r\n            className=\"card-img-top\"\r\n            alt={product.name}\r\n            height=\"300\"\r\n            width={\"350px\"}\r\n          />\r\n        </div>\r\n        <div className=\"col-md-6 product-details-info\">\r\n          <h1 className=\"text-center\">Product Details</h1>\r\n          <hr />\r\n          <h6>Name : {product.name}</h6>\r\n          <h6>Description : {product.description}</h6>\r\n          <h6>\r\n            Price :\r\n            {product?.price?.toLocaleString(\"en-US\", {\r\n              style: \"currency\",\r\n              currency: \"USD\",\r\n            })}\r\n          </h6>\r\n          <h6>Category : {product?.category?.name}</h6>\r\n          <button class=\"btn btn-secondary ms-1\">ADD TO CART</button>\r\n        </div>\r\n      </div>\r\n      <hr />\r\n      <div className=\"row container similar-products\">\r\n        <h4>Similar Products ➡️</h4>\r\n        {relatedProducts.length < 1 && (\r\n          <p className=\"text-center\">No Similar Products found</p>\r\n        )}\r\n        <div className=\"d-flex flex-wrap\">\r\n          {relatedProducts?.map((p) => (\r\n            <div className=\"card m-2\" key={p._id}>\r\n              <img\r\n                src={`/api/v1/product/product-photo/${p._id}`}\r\n                className=\"card-img-top\"\r\n                alt={p.name}\r\n              />\r\n              <div className=\"card-body\">\r\n                <div className=\"card-name-price\">\r\n                  <h5 className=\"card-title\">{p.name}</h5>\r\n                  <h5 className=\"card-title card-price\">\r\n                    {p.price.toLocaleString(\"en-US\", {\r\n                      style: \"currency\",\r\n                      currency: \"USD\",\r\n                    })}\r\n                  </h5>\r\n                </div>\r\n                <p className=\"card-text \">\r\n                  {p.description.substring(0, 60)}...\r\n                </p>\r\n                <div className=\"card-name-price\">\r\n                  <button\r\n                    className=\"btn btn-info ms-1\"\r\n                    onClick={() => navigate(`/product/${p.slug}`)}\r\n                  >\r\n                    More Details\r\n                  </button>\r\n                  {/* <button\r\n                  className=\"btn btn-dark ms-1\"\r\n                  onClick={() => {\r\n                    setCart([...cart, p]);\r\n                    localStorage.setItem(\r\n                      \"cart\",\r\n                      JSON.stringify([...cart, p])\r\n                    );\r\n                    toast.success(\"Item Added to cart\");\r\n                  }}\r\n                >\r\n                  ADD TO CART\r\n                </button> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"mappings":"+ZAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,OAAM,KAAM,+BAA+B,CAClD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,oCAAoC,CAAC,wFAE5C,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,sCAC3B,GAAMC,OAAM,CAAGH,SAAS,EAAE,CAC1B,GAAMI,SAAQ,CAAGH,WAAW,EAAE,CAC9B,cAA8BL,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAAnCS,OAAO,eAAEC,UAAU,eAC1B,eAA8CV,QAAQ,CAAC,EAAE,CAAC,yCAAnDW,eAAe,eAAEC,kBAAkB,eAE1C;AACAX,SAAS,CAAC,UAAM,CACd,GAAIM,MAAM,SAANA,MAAM,WAANA,MAAM,CAAEM,IAAI,CAAEC,UAAU,EAAE,CAChC,CAAC,CAAE,CAACP,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEM,IAAI,CAAC,CAAC,CAClB;AACA,GAAMC,WAAU,4FAAG,oMAEQX,MAAK,CAACY,GAAG,uCACCR,MAAM,CAACM,IAAI,EAC3C,uCAFOG,IAAI,kBAAJA,IAAI,CAGZN,UAAU,CAACM,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEP,OAAO,CAAC,CACzBQ,iBAAiB,CAACD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEP,OAAO,CAACS,GAAG,CAAEF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEP,OAAO,CAACU,QAAQ,CAACD,GAAG,CAAC,CAAC,+EAEjEE,OAAO,CAACC,GAAG,aAAO,CAAC,mEAEtB,kBAVKP,WAAU,0CAUf,CACD;AACA,GAAMG,kBAAiB,6FAAG,kBAAOK,GAAG,CAAEC,GAAG,0LAEdpB,MAAK,CAACY,GAAG,2CACKO,GAAG,aAAIC,GAAG,EAC9C,yCAFOP,IAAI,mBAAJA,IAAI,CAGZJ,kBAAkB,CAACI,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEQ,QAAQ,CAAC,CAAC,mFAEnCJ,OAAO,CAACC,GAAG,cAAO,CAAC,qEAEtB,kBATKJ,kBAAiB,iDAStB,CACD,mBACE,MAAC,MAAM,yBACL,aAAK,SAAS,CAAC,+BAA+B,wBAC5C,YAAK,SAAS,CAAC,UAAU,uBACvB,YACE,GAAG,yCAAmCR,OAAO,CAACS,GAAG,CAAG,CACpD,SAAS,CAAC,cAAc,CACxB,GAAG,CAAET,OAAO,CAACgB,IAAK,CAClB,MAAM,CAAC,KAAK,CACZ,KAAK,CAAE,OAAQ,EACf,EACE,cACN,aAAK,SAAS,CAAC,+BAA+B,wBAC5C,WAAI,SAAS,CAAC,aAAa,UAAC,iBAAe,EAAK,cAChD,aAAM,cACN,sBAAI,SAAO,CAAChB,OAAO,CAACgB,IAAI,GAAM,cAC9B,sBAAI,gBAAc,CAAChB,OAAO,CAACiB,WAAW,GAAM,cAC5C,sBAAI,SAEF,CAACjB,OAAO,SAAPA,OAAO,iCAAPA,OAAO,CAAEkB,KAAK,yCAAd,eAAgBC,cAAc,CAAC,OAAO,CAAE,CACvCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KACZ,CAAC,CAAC,GACC,cACL,sBAAI,aAAW,CAACrB,OAAO,SAAPA,OAAO,oCAAPA,OAAO,CAAEU,QAAQ,4CAAjB,kBAAmBM,IAAI,GAAM,cAC7C,eAAQ,KAAK,CAAC,wBAAwB,UAAC,aAAW,EAAS,GACvD,GACF,cACN,aAAM,cACN,aAAK,SAAS,CAAC,gCAAgC,wBAC7C,oBAAI,+BAAmB,EAAK,CAC3Bd,eAAe,CAACoB,MAAM,CAAG,CAAC,eACzB,UAAG,SAAS,CAAC,aAAa,UAAC,2BAAyB,EACrD,cACD,YAAK,SAAS,CAAC,kBAAkB,UAC9BpB,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEqB,GAAG,CAAC,SAACC,CAAC,qBACtB,aAAK,SAAS,CAAC,UAAU,wBACvB,YACE,GAAG,yCAAmCA,CAAC,CAACf,GAAG,CAAG,CAC9C,SAAS,CAAC,cAAc,CACxB,GAAG,CAAEe,CAAC,CAACR,IAAK,EACZ,cACF,aAAK,SAAS,CAAC,WAAW,wBACxB,aAAK,SAAS,CAAC,iBAAiB,wBAC9B,WAAI,SAAS,CAAC,YAAY,UAAEQ,CAAC,CAACR,IAAI,EAAM,cACxC,WAAI,SAAS,CAAC,uBAAuB,UAClCQ,CAAC,CAACN,KAAK,CAACC,cAAc,CAAC,OAAO,CAAE,CAC/BC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KACZ,CAAC,CAAC,EACC,GACD,cACN,WAAG,SAAS,CAAC,YAAY,WACtBG,CAAC,CAACP,WAAW,CAACQ,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,KAClC,GAAI,cACJ,YAAK,SAAS,CAAC,iBAAiB,uBAC9B,eACE,SAAS,CAAC,mBAAmB,CAC7B,OAAO,CAAE,yBAAM1B,SAAQ,oBAAayB,CAAC,CAACpB,IAAI,EAAG,EAAC,UAC/C,cAED,EAAS,EAcL,GACF,GAxCuBoB,CAAC,CAACf,GAAG,CAyC9B,EACP,CAAC,EACE,GACF,GACC,CAEb,CAAC,CAED,cAAeZ,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}